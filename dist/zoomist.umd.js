(function(b,p){typeof exports=="object"&&typeof module<"u"?module.exports=p():typeof define=="function"&&define.amd?define(p):(b=typeof globalThis<"u"?globalThis:b||self,b.Zoomist=p())})(this,function(){var F,yt,q,Mt,K,Ct,J,It,Q,$t,tt,xt,et,Nt,st,Bt,nt,Ht,it,Wt,ot,Vt,at,Zt;"use strict";var Se=Object.defineProperty;var be=(b,p,O)=>p in b?Se(b,p,{enumerable:!0,configurable:!0,writable:!0,value:O}):b[p]=O;var Y=(b,p,O)=>(be(b,typeof p!="symbol"?p+"":p,O),O),Oe=(b,p,O)=>{if(!p.has(b))throw TypeError("Cannot "+O)};var D=(b,p,O)=>{if(p.has(b))throw TypeError("Cannot add the same private member more than once");p instanceof WeakSet?p.add(b):p.set(b,O)};var R=(b,p,O)=>(Oe(b,p,"access private method"),O);const b="",p=n=>document.contains(Z(n)),O=n=>{if(!n)return!1;try{const{constructor:t}=n,{prototype:e}=t,{hasOwnProperty:s}=Object.prototype;return t&&e&&s.call(e,"isPrototypeOf")}catch{return!1}},pt=n=>typeof n=="function",V=n=>!isNaN(Number(n)),ct=n=>n==null,Z=n=>n instanceof HTMLElement?n:document.querySelector(n),ht=(n,t)=>t?n.closest(`.${t}`):null,X=n=>{const t="touches"in n?n.touches[0]:n;return{clientX:t.clientX,clientY:t.clientY}},U=n=>({clientX:[...n].map(t=>t.clientX).reduce((t,e)=>t+e)/n.length,clientY:[...n].map(t=>t.clientY).reduce((t,e)=>t+e)/n.length}),L=n=>{const{width:t,height:e,top:s,left:a,bottom:o}=n.getBoundingClientRect();return{width:t,height:e,top:s,left:a,bottom:o}},Et=n=>n.length>=2?Math.hypot(n[0].clientX-n[1].clientX,n[0].clientY-n[1].clientY):0,C=(n,t)=>{for(const[e,s]of Object.entries(t))typeof s=="string"&&n.style.setProperty(e,s)},x=(n,t)=>{for(const[e,s]of Object.entries(t))n.setAttribute(e,s)},v=(n,t)=>{for(const[e,s]of Object.entries(t))n[e]=s},A=(n,t,e)=>Math.min(Math.max(n,t),e),w=n=>{const t=+(Math.round(+(n+"e+2"))+"e-2");return isNaN(t)?0:t},St=n=>{throw new Error(n)},dt=n=>console.warn(n),N=(n="div",t,e,s)=>{const a=document.createElement(n);return t&&a.classList.add(...t.split(" ")),e&&x(a,e),s&&(a.innerHTML=s),a},E="zoomist",Ut=`${E}-container`,bt=`${E}-wrapper`,ut=`${E}-image`,kt=`${E}-not-draggable`,Gt=`${E}-not-wheelable`,B=`${E}-slider`,jt=`${E}-slider-wrapper`,Pt=`${E}-slider-bar`,Ft=`${E}-slider-button`,k=`${E}-zoomer`,qt=`${E}-zoomer-button`,G=`${E}-zoomer-icon`,mt=`${E}-zoomer-in`,ft=`${E}-zoomer-out`,I=`${E}-zoomer-reset`,Kt=`${E}-zoomer-disabled`,Jt={tabindex:"0",role:"slider","aria-label":"slider for zoomist","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"0","aria-disabled":"false"},gt={tabindex:"0",role:"button",type:"button","aria-disabled":"false"},Qt={...gt,"aria-label":"button for zoom in zoomist"},te={...gt,"aria-label":"button for zoom out zoomist"},Ot={...gt,"aria-label":"button for reset zoomist scale"},M=typeof window<"u"&&typeof window.document<"u"&&"ontouchstart"in window,ee=M?"touchstart":"mousedown",j=M?"touchmove":"mousemove",P=M?"touchend":"mouseup",se="wheel",ne=["left","right","center"],ie=["top","bottom","center"],vt="--scale",Tt="--translate-x",Dt="--translate-y",oe="--value",Rt="--rotate",wt={draggable:!0,wheelable:!0,pinchable:!0,bounds:!0,zoomRatio:.1,maxScale:10,minScale:1,initScale:null,rotateRatio:1,dragReleaseOnBounds:!1,wheelReleaseOnMinMax:!1,disableDraggingClass:kt,disableWheelingClass:Gt},ae={el:null,direction:"horizontal"},re={el:`.${B}`},le={el:null,inEl:null,outEl:null,resetEl:null,rotateEl:null,disabledClass:Kt},ce={el:`.${k}`,inEl:`.${mt}`,outEl:`.${ft}`,resetEl:`.${I}`,rotateEl:`.${I}`},he={ready:null,reset:null,resize:null,beforeDestroy:null,destroy:null,beforeUpdate:null,update:null,zoom:null,wheel:null,dragStart:null,drag:null,dragEnd:null,pinchStart:null,pinch:null,pinchEnd:null,slideStart:null,slide:null,slideEnd:null},de={slider:null,zoomer:null},ue=`
<svg viewBox="0 0 12 12" class="${G}">
  <polygon points="12,5.5 6.5,5.5 6.5,0 5.5,0 5.5,5.5 0,5.5 0,6.5 5.5,6.5 5.5,12 6.5,12 6.5,6.5 12,6.5 "/>
</svg>
`,me=`
<svg viewBox="0 0 12 12" class="${G}">
  <rect y="5.5" width="12" height="1"/>
</svg>
`,fe=`
<svg viewBox="0 0 12 12" class="${G}">
  <path d="m7.45,1.27l.35-.22c.26-.17.34-.52.17-.78-.17-.27-.52-.34-.78-.17l-1.54.99-.19.13-.11.46,1.12,1.75c.11.17.29.26.48.26.1,0,.21-.03.31-.09.26-.17.34-.52.17-.78l-.29-.46c1.85.5,3.22,2.17,3.22,4.18,0,2.39-1.95,4.34-4.34,4.34S1.66,8.92,1.66,6.52c0-1.15.44-2.23,1.25-3.05.22-.22.22-.58,0-.8-.22-.22-.58-.22-.8,0-1.02,1.03-1.58,2.4-1.58,3.85,0,3.02,2.46,5.48,5.48,5.48s5.48-2.46,5.48-5.48c0-2.51-1.71-4.62-4.02-5.26Z"/>
</svg>
`,ge=`
<svg viewBox="0 0 1024 1024" class="${G}">
  <path d="M694.4 960H195.2C131.7 960 80 908.4 80 845.1V462c0-63.4 51.7-114.9 115.2-114.9h499.2c63.5 0 115.2 51.6 115.2 114.9v383.1c0 63.3-51.7 114.9-115.2 114.9zM195.2 423.7c-21.2 0-38.4 17.2-38.4 38.3v383.1c0 21.1 17.2 38.3 38.4 38.3h499.2c21.2 0 38.4-17.2 38.4-38.3V462c0-21.1-17.2-38.3-38.4-38.3H195.2z" fill="#333333" p-id="1697"></path><path d="M905.6 450.3c-14.8 0-28.9-8.6-35.2-23C788.6 240.8 592.7 213 483.2 213c-21.2 0-38.4-17.2-38.4-38.3s17.2-38.3 38.4-38.3c218.2 0 385 94.9 457.6 260.3 8.5 19.4-0.4 42-19.8 50.5-5 2.1-10.3 3.1-15.4 3.1z" fill="#333333" p-id="1698"></path><path d="M473.6 285.4c-9.8 0-19.7-3.7-27.2-11.2l-72.5-72.4c-15-15-15-39.2 0-54.2l72.5-72.4c15-15 39.3-15 54.3 0s15 39.2 0 54.2l-45.4 45.3 45.4 45.3c15 15 15 39.2 0 54.2-7.4 7.4-17.3 11.2-27.1 11.2z" fill="#333333" p-id="1699"></path>
</svg>`,_e={on(n,t){if(!t||!pt(t))return this;const{__events__:e}=this;return n.split(" ").forEach(s=>{const a=s;e[a]||(e[a]=[]),e[a].push(t)}),this},emit(n,...t){const{__events__:e}=this;return e[n]?(e[n].forEach(s=>{pt(s)&&s.apply(this,t)}),this):this},zoom(n,t){const{scale:e}=this.transform,s=this.useFixedRatio(w(e*(n+1)));return e===s?this:(this.zoomTo(s,t),this)},zoomTo(n,t=!0){const{image:e,transform:{scale:s,translateX:a,translateY:o},options:{bounds:r}}=this;if(n=this.useFixedRatio(n),n===s)return this;if(this.transform.scale=n,!t)return this.emit("zoom",this,this.transform.scale),this;t=typeof t=="boolean"?this.getContainerCenterClient():t;const{clientX:l,clientY:c}=t,{top:h,left:i,width:d,height:_}=L(e),{width:u,height:f}=this.getImageDiff(),S=n/s-1,g=(d/2-l+i)*S+a,m=(_/2-c+h)*S+o,T=r?A(g,u,-u):g,z=r?A(m,f,-f):m;return v(this.transform,{translateX:T,translateY:z}),this.emit("zoom",this,this.transform.scale),this},move(n){const{options:{bounds:t},transform:{translateX:e,translateY:s}}=this,{x:a,y:o}=n,{width:r,height:l}=this.getImageDiff();if(V(a)){const c=e+a,h=t?A(c,r,-r):c;this.transform.translateX=h}if(V(o)){const c=s+o,h=t?A(c,l,-l):c;this.transform.translateY=h}return this},moveTo(n){const{options:{bounds:t}}=this,{x:e,y:s}=n,{width:a,height:o}=this.getImageDiff();if(V(e)){const r=Number(e),l=t?A(r,a,-a):r;this.transform.translateX=l}if(ne.some(r=>r===e)){const l={left:-a,right:a,center:0}[e];this.transform.translateX=l}if(V(s)){const r=Number(s),l=t?A(r,o,-o):r;this.transform.translateY=l}if(ie.some(r=>r===s)){const l={top:-o,bottom:o,center:0}[s];this.transform.translateY=l}return this},slideTo(n){const{options:{minScale:t,maxScale:e}}=this,s=(e-t)*n/100+t;return this.zoomTo(s),this},reset(){const{options:{initScale:n}}=this;return v(this.transform,{scale:n,translateX:0,translateY:0}),this.emit("reset",this),this},rotate(n){const{rotate:t}=this.transform;return v(this.transform,{rotate:t+n}),this},destroy(n=!1){const{element:t,image:e,controller:s}=this;return this.mounted&&(this.emit("beforeDestroy",this),s.abort(),this.destroyModules(),n&&e&&(this.reset(),e.removeAttribute("style")),t[E]=null,this.mounted=!1,this.emit("destroy",this)),null},update(n){const{element:t,controller:e}=this;return this.emit("beforeUpdate",this),t[E]=null,this.mounted=!1,e.abort(),this.destroyModules(),n&&(this.options=Object.assign({},wt,O(n)&&n)),this.init(),this.emit("update",this),this},getImageData(){return{...this.data.imageData}},getContainerData(){return{...this.data.containerData}},getSliderValue(){const{__modules__:{slider:n}}=this;return n&&n.value!==void 0?n.value:null},isOnBoundTop(){const{options:{bounds:n}}=this;if(!n)return!1;const{transform:{translateY:t}}=this,{height:e}=this.getImageDiff();return t*-1===w(e)},isOnBoundBottom(){const{options:{bounds:n}}=this;if(!n)return!1;const{transform:{translateY:t}}=this,{height:e}=this.getImageDiff();return t===w(e)},isOnBoundLeft(){const{options:{bounds:n}}=this;if(!n)return!1;const{transform:{translateX:t}}=this,{width:e}=this.getImageDiff();return t*-1===w(e)},isOnBoundRight(){const{options:{bounds:n}}=this;if(!n)return!1;const{transform:{translateX:t}}=this,{width:e}=this.getImageDiff();return t===w(e)},isOnBoundX(){const{options:{bounds:n}}=this;if(!n)return!1;const{transform:{translateX:t}}=this,{width:e}=this.getImageDiff();return Math.abs(t)===Math.abs(w(e))},isOnBoundY(){const{options:{bounds:n}}=this;if(!n)return!1;const{transform:{translateY:t}}=this,{height:e}=this.getImageDiff();return Math.abs(t)===Math.abs(w(e))},isOnMinScale(){const{options:{minScale:n}}=this,{transform:{scale:t}}=this;return t===n},isOnMaxScale(){const{options:{maxScale:n}}=this,{transform:{scale:t}}=this;return t===n},getImageDiff(){const{width:n,height:t}=this.getContainerData(),{width:e,height:s}=this.getImageData();return{width:(n-e)/2,height:(t-s)/2}},getContainerCenterClient(){const{element:n}=this,{top:t,left:e,width:s,height:a}=L(n);return{clientX:e+s/2,clientY:t+a/2}},getScaleRatio(){const{transform:{scale:n},options:{minScale:t,maxScale:e}}=this;return(n-t)/(e-t)},useFixedRatio(n){const{options:{minScale:t,maxScale:e}}=this;return A(n,t,e)}},{defineProperty:H}=Object;class Yt{constructor(t,e){D(this,F);D(this,q);D(this,K);D(this,J);D(this,Q);D(this,tt);D(this,et);D(this,st);D(this,nt);D(this,it);D(this,ot);D(this,at);Y(this,"element");Y(this,"options");Y(this,"wrapper");Y(this,"image");Y(this,"mounted");Y(this,"data");Y(this,"transform");Y(this,"states");Y(this,"controller");Y(this,"__events__");Y(this,"__modules__");t||St("The first argument is required."),p(t)||St(`Element ${t} is not exist.`),this.element=Z(t),this.options=Object.assign({},wt,O(e)&&e),this.init()}init(){const{element:t}=this,{options:{bounds:e,minScale:s,maxScale:a,initScale:o}}=this;if(t[E])return;t[E]=this;const r=t.querySelector(`.${bt}`),l=t.querySelector(`.${ut}`);if(!r)return dt(`${E} needs a ".${bt}" element.`);if(!l)return dt(`${E} needs a ".${ut}" element.`);this.options.minScale=e&&s<1?1:s,this.options.maxScale=Math.max(a,s),this.options.initScale=A(o||s,s,a),this.wrapper=r,this.image=l,R(this,F,yt).call(this)}destroyModules(){const{slider:t,zoomer:e}=this.__modules__;t&&this.destroySlider(),e&&this.destroyZoomer()}destroySlider(){var o,r;const{__modules__:{slider:t}}=this;if(!t||!t.mounted)return;const{options:{el:e},controller:s}=t;e===`.${B}`?(o=t.sliderEl)==null||o.remove():(r=t.sliderTrack)==null||r.remove(),s==null||s.abort(),t.mounted=!1}destroyZoomer(){const{__modules__:{zoomer:t}}=this;if(!t||!t.mounted)return;const{options:{el:e,inEl:s,outEl:a,resetEl:o,rotateEl:r},controller:l,zoomerEl:c,zoomerInEl:h,zoomerOutEl:i,zoomerResetEl:d,zoomerRotateEl:_}=t,u=(f,S,g)=>{f===`.${S}`&&(g==null||g.remove())};[{target:e,className:k,el:c},{target:s,className:mt,el:h},{target:a,className:ft,el:i},{target:o,className:I,el:d},{target:r,className:I,el:_}].forEach(f=>u(f.target,f.className,f.el)),l==null||l.abort(),t.mounted=!1}}return F=new WeakSet,yt=function(){const{element:t,image:e,options:s}=this,{draggable:a,pinchable:o}=s,{offsetWidth:r,offsetHeight:l}=t,{offsetWidth:c,offsetHeight:h}=e,{width:i,height:d}=L(e);if(!c||!h)return dt(`The width or height of ${ut} should not be 0.`);if(this.transform={scale:0,translateX:0,translateY:0,rotate:0},this.data={imageData:{originWidth:c,originHeight:h,width:i,height:d},containerData:{width:r,height:l}},M&&(a||o)&&(this.data.touchData={hypot:0,startX:0,startY:0,prevX:0,prevY:0,imageTop:0,imageLeft:0,widthDiff:0,heightDiff:0}),!M&&a&&(this.data.dragData={startX:0,startY:0}),this.__events__={...he},s.on)for(const[_,u]of Object.entries(s.on))this.__events__[_]=[u];if(this.__modules__={...de},s.slider){const _=s.slider===!0?re:s.slider;this.__modules__.slider={options:Object.assign({},ae,_)}}if(s.zoomer){const _=s.zoomer===!0?ce:s.zoomer;this.__modules__.zoomer={options:Object.assign({},le,_)}}this.controller=new AbortController,R(this,q,Mt).call(this)},q=new WeakSet,Mt=function(){if(this.mounted)return;const{element:t,image:e,options:{minScale:s,maxScale:a,initScale:o},__modules__:{slider:r,zoomer:l}}=this,c=this;C(e,{transform:`
        translate(var(${Tt}, 0px), var(${Dt}, 0px))
        scale(var(${vt}, 0)) rotate(var(${Rt}, 0deg))`}),H(this.transform,"scale",{get(){return c.transform.__scale__},set(h){const i=c.useFixedRatio(h);if(!(ct(i)||c.transform.__scale__===i)){if(c.transform.__scale__=i,C(e,{[vt]:i.toString()}),v(c.data.imageData,{width:L(e).width,height:L(e).height}),r){const d=Math.round(c.getScaleRatio()*100);r.value=d}if(l&&l.options.disabledClass){const{zoomerInEl:d,zoomerOutEl:_,zoomerResetEl:u,options:{disabledClass:f}}=l;d&&(d.classList[i===a?"add":"remove"](f),x(d,{"aria-disabled":i===a?"true":"false"})),_&&(_.classList[i===s?"add":"remove"](f),x(_,{"aria-disabled":i===s?"true":"false"})),u&&(u.classList[i===o?"add":"remove"](f),x(u,{"aria-disabled":i===o?"true":"false"}))}}}}),H(this.transform,"translateX",{get(){return c.transform.__translateX__},set(h){const i=w(h);ct(i)||c.transform.__translateX__===i||(c.transform.__translateX__=i,C(e,{[Tt]:`${i}px`}))}}),H(this.transform,"translateY",{get(){return c.transform.__translateY__},set(h){const i=w(h);ct(i)||c.transform.__translateY__===i||(c.transform.__translateY__=i,C(e,{[Dt]:`${i}px`}))}}),H(this.transform,"rotate",{get(){return c.transform.__rotate__},set(h){const i=h%4;c.transform.__rotate__=i,C(e,{[Rt]:`-${i*90}deg`})}}),R(this,K,Ct).call(this),R(this,st,Bt).call(this),v(this.transform,{scale:o,translateX:0,translateY:0,rotate:0}),t.classList.add(Ut),this.mounted=!0,this.emit("ready",this)},K=new WeakSet,Ct=function(){const{wrapper:t,options:e,controller:{signal:s}}=this,{draggable:a,pinchable:o,wheelable:r}=e;if(this.states={},r){this.states.wheeling=!1;const l=c=>R(this,J,It).call(this,c);t.addEventListener(se,l,{signal:s})}if(M&&(a||o)){a&&(this.states.dragging=!1),o&&(this.states.pinching=!1);const l=c=>R(this,tt,xt).call(this,c);t.addEventListener("touchstart",l,{signal:s})}if(!M&&a){this.states.dragging=!1;const l=c=>R(this,Q,$t).call(this,c);t.addEventListener("mousedown",l,{signal:s})}R(this,et,Nt).call(this)},J=new WeakSet,It=function(t){const{options:{zoomRatio:e,wheelReleaseOnMinMax:s,disableWheelingClass:a}}=this,o=(t.deltaY||t.detail)>0?-1:1;if(s){const r=this.isOnMinScale(),l=this.isOnMaxScale();r&&o===-1||l&&o===1||t.preventDefault()}else t.preventDefault();this.states.wheeling||ht(t.target,a)||(this.states.wheeling=!0,setTimeout(()=>{this.states.wheeling=!1},30),this.zoom(o*e,X(t)),this.emit("wheel",this,this.transform.scale,t))},Q=new WeakSet,$t=function(t){const{data:e,transform:s,options:{disableDraggingClass:a}}=this,{dragData:o,imageData:r}=e;if(!o||!r)return;const l=i=>{i&&i.button!==0||(i.preventDefault(),!ht(i.target,a)&&(v(o,{startX:X(i).clientX,startY:X(i).clientY}),this.states.dragging=!0,this.emit("dragStart",this,{x:s.translateX,y:s.translateY},i),document.addEventListener(j,c),document.addEventListener(P,h)))},c=i=>{if(i.touches||!this.states.dragging)return;i.preventDefault();const d=X(i).clientX,_=X(i).clientY,u=d-o.startX+s.translateX,f=_-o.startY+s.translateY;this.moveTo({x:u,y:f}),v(o,{startX:X(i).clientX,startY:X(i).clientY}),this.emit("drag",this,{x:u,y:f},i)},h=i=>{i.touches||(this.states.dragging=!1,this.emit("dragEnd",this,{x:s.translateX,y:s.translateY},i),document.removeEventListener(j,c),document.removeEventListener(P,h))};l(t)},tt=new WeakSet,xt=function(t){const{data:e,transform:s,options:{maxScale:a,minScale:o,draggable:r,pinchable:l,bounds:c,dragReleaseOnBounds:h,disableDraggingClass:i}}=this,{touchData:d,imageData:_}=e;if(!d||!_)return;const u=g=>{const m=g.touches;if(!m)return;if(c&&h){const rt=this.isOnBoundX(),lt=this.isOnBoundY(),$=m.length===1&&(rt||lt);console.log($),$||g.preventDefault()}else g.preventDefault();if(ht(g.target,i)&&m.length<=1)return;const{top:T,left:z}=L(this.image),{width:y,height:W}=this.getImageDiff();v(d,{hypot:Et(m),startX:U(m).clientX,startY:U(m).clientY,prevX:0,prevY:0,imageTop:T,imageLeft:z,widthDiff:y,heightDiff:W}),r&&(this.states.dragging=!0,this.emit("dragStart",this,{x:s.translateX,y:s.translateY},g)),l&&m.length===2&&(this.states.pinching=!0,this.emit("pinchStart",this,s.scale,g)),document.addEventListener("touchmove",f),document.addEventListener("touchend",S)},f=g=>{const m=g.touches;if(!m)return;const{states:{dragging:T,pinching:z}}=this,{top:y,left:W}=L(this.image),{width:rt,height:lt}=this.getImageDiff(),$=Et(m),zt=$?$/d.hypot:1,_t=this.useFixedRatio(zt*s.scale),Xt=U(m).clientX+d.prevX,Lt=U(m).clientY+d.prevY;if(z&&m.length===2&&this.zoomTo(_t,!1),T){const At=_t!==a&&_t!==o&&l?zt:1,pe=w(Xt-d.imageLeft-(rt-d.widthDiff)-(d.startX-d.imageLeft)*At+s.translateX),Ee=w(Lt-d.imageTop-(lt-d.heightDiff)-(d.startY-d.imageTop)*At+s.translateY);this.moveTo({x:pe,y:Ee})}v(d,{hypot:$,startX:Xt,startY:Lt,imageTop:y,imageLeft:W,widthDiff:rt,heightDiff:lt}),z&&m.length===2&&this.emit("pinch",this,s.scale,g),T&&this.emit("drag",this,{x:s.translateX,y:s.translateY},g)},S=g=>{const m=g.touches;if(!m)return;const{states:{dragging:T,pinching:z}}=this;if(T&&!m.length&&(this.states.dragging=!1,this.emit("dragEnd",this,{x:s.translateX,y:s.translateY},g)),z&&m.length<2&&(this.states.pinching=!1,this.emit("pinchEnd",this,s.scale,g)),T&&m.length===1){const y=X(g).clientX,W=X(g).clientY;v(d,{prevX:d.startX-y,prevY:d.startY-W})}m.length||(document.removeEventListener("touchmove",f),document.removeEventListener("touchend",S))};u(t)},et=new WeakSet,Nt=function(){const{element:t,image:e,transform:s}=this;new ResizeObserver(()=>{const{offsetWidth:o,offsetHeight:r}=t,{width:l,height:c}=this.getContainerData();if(o===l&&r===c)return;const h=s.translateX,i=s.translateY;if(h){const S=o/l*h;this.transform.translateX=S}if(i){const S=r/c*i;this.transform.translateY=S}const{offsetWidth:d,offsetHeight:_}=e,{width:u,height:f}=L(e);v(this.data.containerData,{width:o,height:r}),v(this.data.imageData,{originWidth:d,originHeight:_,width:u,height:f}),this.emit("resize",this)}).observe(t)},st=new WeakSet,Bt=function(){const{slider:t,zoomer:e}=this.__modules__;t&&R(this,nt,Ht).call(this),e&&R(this,ot,Vt).call(this)},nt=new WeakSet,Ht=function(){const{element:t,__modules__:{slider:e}}=this;if(!e||e.mounted)return;const{options:{el:s,direction:a}}=e,o=s===`.${B}`;if(!s||!o&&!p(s))return;const r=o?N("div",B):Z(s),l=N("div",jt),c=N("span",Pt),h=N("span",Ft,{...Jt,"aria-orientation":a});r.classList.add(`${B}-${a}`),H(e,"value",{get(){return e.__value__},set(i){e.__value__!==i&&(e.__value__=i,C(r,{[oe]:i.toString()}),x(h,{"aria-valuenow":i.toString()}))}}),v(e,{value:this.getScaleRatio()*100,controller:new AbortController,sliding:!1,sliderEl:r,sliderTrack:l,sliderButton:h}),R(this,it,Wt).call(this),l.append(c,h),r.append(l),o&&t.append(r),e.mounted=!0},it=new WeakSet,Wt=function(){const{options:{minScale:t,maxScale:e},__modules__:{slider:s}}=this;if(!s)return;const{options:{direction:a},controller:o,sliderEl:r,sliderTrack:l}=s;if(!r||!l)return;const c=a==="vertical",h=u=>{const f=L(l),S=f[c?"height":"width"],g=f[c?"bottom":"left"],m=X(u)[c?"clientY":"clientX"],T=w(A((m-g)*(c?-1:1)/S,0,1));return(e-t)*T+t},i=u=>{if(u instanceof MouseEvent&&u.button!==0)return;s.sliding=!0;const f=h(u);this.zoomTo(f),this.emit("slideStart",this,this.getSliderValue(),u),document.addEventListener(j,d),document.addEventListener(P,_)},d=u=>{if(!s.sliding)return;const f=h(u);this.zoomTo(f),this.emit("slide",this,this.getSliderValue(),u)},_=u=>{this.emit("slideEnd",this,this.getSliderValue(),u),s.sliding=!1,document.removeEventListener(j,d),document.removeEventListener(P,_)};r.addEventListener(ee,i,{signal:o==null?void 0:o.signal})},ot=new WeakSet,Vt=function(){const{element:t,__modules__:{zoomer:e}}=this;if(!e||e.mounted)return;const{options:{el:s,inEl:a,outEl:o,resetEl:r,rotateEl:l}}=e,c=[a,o,r,l],h=(S,g,m,T,z)=>{const y=S===`.${m}`;return!S||!y&&!p(S)?null:(m=c.includes(S)?`${m} ${qt}`:m,y?N(g,m,T,z):Z(S))},i=h(s,"div",k),d=h(a,"button",mt,Qt,ue),_=h(o,"button",ft,te,me),u=h(r,"button",I,Ot,fe),f=h(l,"button",I,Ot,ge);v(e,{controller:new AbortController,zoomerEl:i,zoomerInEl:d,zoomerOutEl:_,zoomerResetEl:u,zoomerRotateEl:f}),i&&(d&&i.append(d),_&&i.append(_),u&&i.append(u),f&&i.append(f),s===`.${k}`&&t.append(i)),R(this,at,Zt).call(this),e.mounted=!0},at=new WeakSet,Zt=function(){const{options:{zoomRatio:t,rotateRatio:e},__modules__:{zoomer:s}}=this,a=this;if(!s)return;const{controller:o,zoomerInEl:r,zoomerOutEl:l,zoomerResetEl:c,zoomerRotateEl:h}=s;r&&r.addEventListener("click",()=>{a.zoom(t)},{signal:o==null?void 0:o.signal}),l&&l.addEventListener("click",()=>{a.zoom(-t)},{signal:o==null?void 0:o.signal}),c&&c.addEventListener("click",()=>{a.reset()},{signal:o==null?void 0:o.signal}),h&&h.addEventListener("click",()=>{a.rotate(e)},{signal:o==null?void 0:o.signal})},Object.assign(Yt.prototype,_e),Yt});
